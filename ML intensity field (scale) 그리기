# ML intensity field (scale) 그리기
from PIL import Image
import os
import matplotlib.pyplot as plt
import numpy as np

path = r'your_folder_path/'

image_files = [f for f in os.listdir(path) if f.endswith('.jpg') or f.endswith('.png')]

images = [Image.open(path + image_file) for image_file in image_files]

y1, x1, y2, x2 = ,  ,  ,

interest_area = [image.crop((x1, y1, x2, y2)) for image in images]

user_brightness = 

scale_min = 
scale_max = 

save_path = r'your_folder_path/'

if not os.path.exists(save_path):
    os.makedirs(save_path)

for i, image_file in enumerate(image_files):
    
    image = Image.open(path + image_file)

    image = image.crop((x1, y1, x2, y2))

    brightness = image.convert("L")

    diff = brightness.point(lambda p: p - user_brightness)

    np_diff = np.array(diff)
    
    plt.axis('off')

    plt.imshow(np_diff, cmap='jet', vmin=scale_min, vmax=scale_max, aspect='equal', origin='lower')
    plt.colorbar()

    filename, _ = os.path.splitext(image_file)  
   plt.savefig(save_path + f'{filename}.png', bbox_inches='tight', pad_inches=0, dpi=300)
    
    plt.show()
